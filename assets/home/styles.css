/* =========================================================
   HOME — GRID + HEROES (Lean + Matched to hero.js)
   ========================================================= */

/* ---------- Layout ---------- */
#pageGrid{
  max-width: 1280px;
  margin: 0 auto;
  padding: 24px 14px 160px; /* room for bottom dock */
}
.section{ margin: 28px 0; }

/* Rows of cards (horizontal scroll) */
.grid{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  gap: 12px;
  align-items: start;
  overflow-x: auto;
  padding-bottom: 8px;
  scroll-snap-type: x mandatory;
}
.grid::-webkit-scrollbar{ display:none; }

/* Row height (used by cards) */
.grid.size-xs{ --card-h:150px; }
.grid.size-s { --card-h:180px; }
.grid.size-m { --card-h:210px; }
.grid.size-l { --card-h:240px; }
.grid.size-xl{ --card-h:270px; }

/* =========================================================
   DIVIDER (Section Heading)
   ========================================================= */
.divider{
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 12px 2px 8px;
  color: #eef3ff;
  font-family: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
.divider-title{
  margin: 0;
  font-weight: 800;
  font-size: 22px;
  letter-spacing: .01em;
  opacity: .92;
}

/* Kebab (left) */
.divider .divider-menu,
.divider .div-arrows .move-btn{
  width: 28px; height: 28px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.16);
  background: #0f1116; color: #eef3ff;
  cursor: pointer; opacity: .95;
  transition: background .2s, border-color .2s;
}
.divider .div-arrows{ display:flex; align-items:center; gap:6px; }
.divider .divider-menu:hover,
.divider .div-arrows .move-btn:hover{
  background:#141821; border-color:rgba(255,255,255,.25);
}

/* =========================================================
   HERO CARD (per-hero shape) + controls
   ========================================================= */
.hero-card{
  position: relative;
  display: block;
  width: auto;
  height: var(--card-h,210px);
  background: #060708;
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 16px;
  padding: 14px;
  scroll-snap-align: start;
  overflow: hidden;
  color: #eef3ff;
  font-family: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}

/* Shapes (only what hero.js emits) */
.hero-card.shape-square { aspect-ratio: 1 / 1; }
.hero-card.shape-hr     { aspect-ratio: 16 / 9; }

/* Hit overlay */
.hero-hit{ position:absolute; inset:0; }

/* Inner */
.hero-body{
  position: relative; z-index: 2;
  height: 100%; width: 100%;
  display: grid; grid-template-rows: 1fr auto;
}

/* Thumbnail */
.hero-thumb{
  position:absolute; inset:0; z-index:0;
  width:110%; height:110%; object-fit:cover;
  transform: translate(-5%,-5%);
  opacity:.9; filter:saturate(1.02) contrast(1.02) brightness(.95);
}

/* Subtle veil for legibility */
.hero-card::after{
  content:""; position:absolute; inset:0; z-index:1;
  border-radius:inherit;
  background: linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.5) 65%, rgba(0,0,0,.65));
}

/* Title */
.hero-title{
  position: relative; z-index:3;
  font-weight: 800; font-size: 18px; letter-spacing:.01em;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Focus pulse (focusHero) */
.hero-card.focus-pulse{
  box-shadow: 0 0 0 3px rgba(10,132,255,.55), 0 12px 30px rgba(0,0,0,.45);
  animation: heroPing .9s ease-out forwards;
}
@keyframes heroPing{
  0%{ transform: scale(.98); }
  100%{ transform: scale(1); box-shadow:none; }
}

/* Kebab on card */
.hero-card .hero-menu{
  position:absolute; top:8px; right:8px;
  width:28px; height:28px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.16);
  background:#0f1116; color:#eef3ff;
  cursor:pointer; opacity:.95; z-index:5;
  transition: background .2s, border-color .2s;
}
.hero-card .hero-menu:hover{ background:#141821; border-color:rgba(255,255,255,.25); }

/* Up/Down stack */
.hero-card .hero-move{
  position:absolute; top:50%; right:8px; transform:translateY(-50%);
  display:flex; flex-direction:column; gap:8px; z-index:4;
}
.hero-card .hero-move .move-btn{
  width:26px; height:26px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.16);
  background:#0f1116; color:#eef3ff; cursor:pointer; opacity:.95;
  transition: background .2s, border-color .2s;
}
.hero-card .hero-move .move-btn:hover{
  background:#141821; border-color:rgba(255,255,255,.25);
}

/* =========================================================
   Dev-only visibility — show edit controls ONLY in Dev mode
   ========================================================= */
.hero-card .hero-menu,
.hero-card .hero-move,
.divider .divider-menu,
.divider .div-arrows{ display:none !important; }

body.config-on .hero-card .hero-menu { display:inline-flex !important; }
body.config-on .hero-card .hero-move { display:flex !important; }
body.config-on .divider .divider-menu{ display:inline-flex !important; }
body.config-on .divider .div-arrows  { display:inline-flex !important; }

/* =========================================================
   FLOATING DRAWERS (Hero + Divider)
   ========================================================= */
.hero-drawer,
.div-drawer{
  position: fixed;
  z-index: 2147483646;
  margin-top: 4px;
  background:#0f1116;
  color:#eef3ff;
  border:1px solid rgba(255,255,255,.16);
  border-radius:10px;
  min-width: 160px;
  box-shadow:0 18px 48px rgba(0,0,0,.55);
  display:flex; flex-direction:column;
  overflow:hidden;
  transform-origin: top left;
  animation: drawerFadeUp .18s ease-out;
}
@keyframes drawerFadeUp{
  from{ opacity:0; transform: translateY(4px); }
  to  { opacity:1; transform: translateY(0); }
}

/* Drawer options (shared) */
.drawer-option{
  padding:10px 12px;
  font:600 13px system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  color:#eef3ff; background:transparent;
  text-align:left; cursor:pointer; user-select:none;
  border-bottom:1px solid rgba(255,255,255,.08);
  display:flex; align-items:center; justify-content:space-between;
  transition: background .2s;
}
.drawer-option:last-child{ border-bottom:none; }
.drawer-option:hover{ background: rgba(255,255,255,.06); }
.drawer-option.blue{ color:#0A84FF; }
.drawer-option.red { color:#FF453A; }

/* Chevron */
.drawer-option .arrow{
  display:inline-block; transition: transform .2s;
}
.drawer-option .arrow.rot{ transform: rotate(90deg); }

/* ----- Divider Size submenu ----- */
.size-sub{
  height: 0; opacity: 0; overflow: hidden;
  transition: height .22s ease, opacity .18s ease;
  background:#0d1016;
}
.size-sub .size-opt{
  padding:8px 14px; text-align:left;
  color:#fff; font-size:14px; font-weight:400;
  background:transparent; border:0; cursor:pointer;
  width:100%;
  transition: background .2s, color .2s;
}
.size-sub .size-opt:hover{ background: rgba(255,255,255,.06); }
.size-sub .size-opt.active{ color:#0A84FF; font-weight:500; }

/* ----- Hero Design submenu ----- */
.hero-drawer{ width:min(240px, 92vw); padding:6px; }
.hero-drawer .sub{
  height:0; opacity:0; overflow:hidden;
  transition: height .22s ease, opacity .18s ease;
  margin:4px 2px 0; border-left:1px solid rgba(255,255,255,.08); padding-left:6px;
}
.hero-drawer .sub-opt{
  width:100%;
  display:flex; align-items:center; gap:8px;
  padding:8px 10px; margin:4px 0;
  border-radius:8px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  color:#eef3ff;
  cursor:pointer; user-select:none;
  font:700 12px system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
.hero-drawer .sub-opt:hover{ background:rgba(255,255,255,.08); }
.hero-drawer .sub-opt.active{
  color:#0A84FF; border-color:rgba(10,132,255,.35); background:rgba(10,132,255,.10);
}
.hero-drawer .sub-opt input[type="checkbox"]{
  accent-color:#0A84FF; width:14px; height:14px;
}
.hero-drawer .sub .drawer-option{ margin:6px 4px 0; border-radius:8px; padding:8px 10px; }

/* =========================================================
   INFO MODAL (fallback)
   ========================================================= */
.info-overlay{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.45);
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  z-index: 2147483646;
  display: grid; place-items: center;
}
.info-modal{
  width: min(560px, 92vw);
  border-radius: 14px;
  background: #0f1116; color: #eef3ff;
  border: 1px solid rgba(255,255,255,.15);
  box-shadow: 0 30px 70px rgba(0,0,0,.6);
  padding: 16px;
  font-family: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
.info-modal dl{
  margin: 0;
  display: grid;
  grid-template-columns: 160px 1fr;
  gap: 8px 12px;
}
.info-modal dt{ opacity: .7; }
.info-modal dd{ margin:0; font-weight: 600; }

/* =========================================================
   Motion safety
   ========================================================= */
@media (prefers-reduced-motion: reduce){
  .drawer-option .arrow,
  .hero-drawer .sub,
  .size-sub,
  .hero-card.focus-pulse{ transition: none; animation: none; }
} 

/* =========================================================
   Hero Gloss Border — subtle pop effect
   ========================================================= */
.hero-card {
  position: relative;
  background-clip: padding-box;
}

.hero-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 6; /* above thumb, below menu */
  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.35) 0%,
    rgba(255,255,255,0.08) 35%,
    rgba(255,255,255,0.12) 50%,
    rgba(255,255,255,0.06) 65%,
    rgba(255,255,255,0.2) 100%
  );
  mix-blend-mode: screen;
  opacity: 0.45;
  transition: opacity .25s ease;
}
.hero-card:hover::before {
  opacity: 0.75;
} 

.audChip.off{ color:#ff6b6b; border-color:#5a1e1e; background:#1a0e0e; }
.pgs-heading.off{ color:#ff5252 !important; opacity:.95; } 

